<div class="content-wrapper" style="background: #6c757d; color:white;">
    
  <section class="content-header">

    <div class="container-fluid">

      <div class="row mb-2">

        <div class="col-sm-6">

          <h1>Modulo Reportes</h1>

        </div>

        <div class="col-sm-6">

          <ol class="breadcrumb float-sm-right">

            <li class="breadcrumb-item"><a href="inicio">Inicio</a></li>

            <li class="breadcrumb-item active" style="color:white;">Modulo Reportes</li>

            </ol>

        </div>

      </div>

    </div>

  </section>


  <section class="content">

    <div class="container-fluid ">

      <div class="row">

        <!-- PRIMERA TARJETA PUERTAS -->
        <div class="col-md-4">
          <!-- Widget: user widget style 2 -->
          <div class="card card-widget  widget-user-2" >
          <!-- Add the bg color to the header using any of the bg-* classes -->
            <div class="widget-user-header bg-olive">
              <div class="widget-user-image">
                <img class="img-circle elevation-2" src="images/icons/puerta.png" alt="User Avatar">
              </div>
                <!-- /.widget-user-image -->
              <h3 class="widget-user-username">Reportes , infomacion</h3>
              <h5 class="widget-user-desc"> General de puertas</h5>
            </div>
            <div class="card-footer p-0" style="background-color: #343a40; ">
              <ul class="nav flex-column">
                <li class="nav-item">
                  <a href="#" class="nav-link"  style="color:#FFFFE0"; >
                      puertas registradas<span class="float-right badge bg-primary">10</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link"  style="color:#FFFFE0">
                      Puertas en mal estado<span class="float-right badge bg-info">2</span>
                  </a>
                </li>
                <li class="nav-item"  >
                  <a href="#" class="nav-link" style="color:#FFFFE0">
                      Puertas Vigiladas  <span class="float-right badge bg-success">10</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link"  style="color:#FFFFE0">
                     Registro de Accesos <span class="float-right badge bg-danger">842</span>
                  </a>
                </li>
                <li class="nav-item bg-olive">
                  <a href="#" class="nav-link"  style="color:#FFFFE0">
                    Ver Grafica ventanas <span class="float-right badge bg-olive"><i class="nav-icon fas fa-check-double"></i></span>
                    
                  </a>
                </li>
              </ul>
            </div>
          </div>  
        </div>

          <!-- SEGUNDA TARJETA VENTANAS -->
        <div class="col-md-4">
          <!-- Widget: user widget style 2 -->
          <div class="card card-widget  widget-user-2" >
            <!-- Add the bg color to the header using any of the bg-* classes -->
            <div class="widget-user-header bg-teal">
              <div class="widget-user-image">
                <img class="img-circle elevation-2" src="images/icons/ventanas.jpg" alt="User Avatar">
              </div>
                <!-- /.widget-user-image -->
              <h3 class="widget-user-username">Reportes, infomacion </h3>
              <h5 class="widget-user-desc"> General de ventanas</h5>
            </div>
            <div class="card-footer p-0" style="background-color: #343a40; ">
              <ul class="nav flex-column">
                <li class="nav-item">
                  <a href="#" class="nav-link"  style="color:#FFFFE0">
                    ventanas registradas<span class="float-right badge bg-primary">20</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link"  style="color:#FFFFE0">
                    ventanas en mal estado<span class="float-right badge bg-info">6</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link"  style="color:#FFFFE0">
                    ventanas Vigiladas  <span class="float-right badge bg-success">13</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link" style="color:#FFFFE0">
                    Registro de Accesos <span class="float-right badge bg-danger">42</span>
                  </a>
                </li>
                <li class="nav-item bg-teal">
                  <a href="#" class="nav-link"  style="color:#FFFFE0">
                    Ver Grafica ventanas <span class="float-right badge bg-teal"><i class="nav-icon fas fa-check-double"></i></span>
                    
                  </a>
                </li>
              </ul>
            </div>
          </div>  
        </div>

          <!-- TERCERA TARJETA TEMPERATURA -->
        <div class="col-md-4">
          <!-- Widget: user widget style 2 -->
          <div class="card card-widget  widget-user-2" >
            <!-- Add the bg color to the header using any of the bg-* classes -->
            <div class="widget-user-header bg-danger">
              <div class="widget-user-image">
                <img class="img-circle elevation-2" src="images/icons/temperatura.jpg" alt="User Avatar">
              </div>
                <!-- /.widget-user-image -->
              <h3 class="widget-user-username">Reportes , infomacion</h3>
              <h5 class="widget-user-desc"> General de Temperatura</h5>
            </div>
            <div class="card-footer p-0" style="background-color: #343a40; ">
              <ul class="nav flex-column">
                <li class="nav-item">
                  <a href="#" class="nav-link"   style="color:#FFFFE0">
                    Sensores de Temperatura registradoss<span class="float-right badge bg-primary">31</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link"  style="color:#FFFFE0">
                    Sensores de Temperatura en mal estado<span class="float-right badge bg-info">5</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link"  style="color:#FFFFE0">
                    Sensores de Temperatura Vigilados  <span class="float-right badge bg-success">12</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link"  style="color:#FFFFE0">
                    Sensores de Temperatura en funcion<span class="float-right badge bg-danger">842</span>
                  </a>
                </li>
                
                <li class="nav-item bg-danger">
                  <a href="#" class="nav-link"  style="color:#FFFFE0" data-toggle="modal" data-target="#modaltempe">
                    Ver Grafica Temperatura <span class="float-right badge bg-danger"><i class="nav-icon fas fa-check-double"></i></span>
                    
                  </a>
                </li>
        
              </ul>
            </div>
          </div>  
        </div>

          <!-- CUARTA TARJETA SERVICIOS  PUBLICOS-->
        <div class="col-md-4">
          <!-- Widget: user widget style 2 -->
          <div class="card card-widget  widget-user-2" >
            <!-- Add the bg color to the header using any of the bg-* classes -->
            <div class="widget-user-header bg-primary">
              <div class="widget-user-image">
                <img class="img-circle elevation-2" src="images/icons/servicios.jpg" alt="User Avatar">
              </div>
                <!-- /.widget-user-image -->
              <h3 class="widget-user-username">Reportes , infomacion</h3>
              <h5 class="widget-user-desc"> General de Servicios </h5>
            </div>
            <div class="card-footer p-0" style="background-color: #343a40; ">
              <ul class="nav flex-column">
                <li class="nav-item">
                  <a href="#" class="nav-link"  style="color:#FFFFE0">
                    Servicios registrados<span class="float-right badge bg-primary">31</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link"  style="color:#FFFFE0">
                    Servicios en mal estado<span class="float-right badge bg-info">5</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link"  style="color:#FFFFE0">
                    Servicios Controlados <span class="float-right badge bg-success">12</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link" style="color:#FFFFE0">
                    Registro de Servicios  <span class="float-right badge bg-danger">842</span>
                  </a>
                </li>
                <li class="nav-item bg-primary">
                  <a href="#" class="nav-link"  style="color:#FFFFE0">
                    Ver Grafica Servicios <span class="float-right badge bg-primary"><i class="nav-icon fas fa-check-double"></i></span>
                    
                  </a>
                </li>
              </ul>
            </div>
          </div>  
        </div>

          <!-- QUINTA TARJETA ILUMINACION -->
        <div class="col-md-4">
          <!-- Widget: user widget style 2 -->
          <div class="card card-widget  widget-user-2" >
            <!-- Add the bg color to the header using any of the bg-* classes -->
            <div class="widget-user-header bg-warning">
              <div class="widget-user-image">
                <img class="img-circle elevation-2" src="images/icons/iluminacion.jpg" alt="User Avatar">
              </div>
                <!-- /.widget-user-image -->
              <h3 class="widget-user-username" style="color: #FFFFE0" >Reportes , infomacion</h3>
              <h5 class="widget-user-desc" style="color: #FFFFE0"> General de Iluminacion</h5>
            </div>
            <div class="card-footer p-0" style="background-color: #343a40; ">
              <ul class="nav flex-column">
                <li class="nav-item">
                  <a href="#" class="nav-link" style="color:#FFFFE0">
                    Bombillos registrados registradas<span class="float-right badge bg-primary">31</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link"  style="color:#FFFFE0">
                    Bombillos en mal estado<span class="float-right badge bg-info">5</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link"  style="color:#FFFFE0">
                    Bombillos Vigiladas  <span class="float-right badge bg-success">12</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link"  style="color:#FFFFE0">
                    Registro de iluminacion y estado <span class="float-right badge bg-danger">842</span>
                  </a>
                </li>

                <li class="nav-item bg-warning">
                  <a href="#" class="nav-link"  style="color:#FFFFE0" data-toggle="modal" data-target="#modalIlumi">
                    Ver Grafica Iluminacion <span class="float-right badge bg-warning"><i class="nav-icon fas fa-check-double"></i></span>
                    
                  </a>
                </li>

              </ul>
            </div>
          </div>  
        </div>
      </div>
    </div>

  </section>

</div>

  
<!--================================
  MODALES DE Iluminacion
=================================-->
<!--Mas Informacion-->
<div class="modal fade" id="modalIlumi">
  <div class="modal-dialog">
    <div class="modal-content" style="background: #6c757d; color:#fff;">
      <form role="form" method="post" enctype="multipart/form-data">

        <!--================================
          CABEZA DEL MODAL
        =================================-->
        <div class="modal-header"  style="background: #343a40; color: #fff">
          <h4 class="modal-title">Informacion</h4>
          <button type="button" style="color:red;" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <!--================================
          CUERPO DEL MODAL
        =================================-->
        <div class="modal-body">
        
          <!-- Grafico temp -->

          <div class="col-md-8">
              <div class="card card-primary">
                <div class="card-header" style="background:#343a40;">
                  <h3 class="card-title">Historial</h3>
                  <div class="card-tools">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                    </button>
                    <button type="button" class="btn btn-tool" data-card-widget="maximize">
                      <i class="fas fa-expand"></i>
                    </button>                      
                    <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                  </div>
                </div>
                <div class="card-body">

                  <div class="chart-container" style="position: relative;">
                    <canvas id="GrafTemp" class="chartjs-render-monitor"></canvas>
                  </div>
                  
                </div>
                <!-- /.card-body -->
              </div>
          </div>



        <!--================================
          FOOTER DEL MODAL
         ================================-->
        <div class="modal-footer justify-content-between">
          <button type="button" class="btn btn-primary" data-dismiss="modal">Aceptar</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal">Ver grafica</button>
        </div>

        <?php
//---- Grafico----
  $labelsTemp=array(); // label para hora

  $temperaturas=array(); //datos de las temperaturas
  $gases=array();        //datos de los gases
  $humedades=array();    //dattos de las humedades

  $tabla="temp_historico_dia";

  $respuestaTemperatura= temperaturaControlador::ctrHistoricoTemperatura($tabla);
  
  foreach($respuestaTemperatura as $key => $value){
    array_push($temperaturas, $value["Temp"]);
    array_push($gases, $value["Gas"]);
    array_push($humedades, $value["Hum"]);

    $hora_temperatura=substr($value["Fecha"],11,5);

    array_push($labelsTemp, $hora_temperatura);
  }

?>

<script>
//--------  Grafico de Temperatura --------------
  var ctxT =$("#GrafTemp").get(0).getContext('2d');
  var chart = new Chart(ctxT, {
    type: 'line',
    data: {
      labels: [
        <?php
          foreach($labelsTemp as $value){
            echo "'".$value."',";
          }
        ?>
      ],          
      datasets: [{
        label: 'Temperatura en grados ºC',
        backgroundColor: 'rgb(251, 154, 153)',
        borderColor: 'rgb(255, 99, 132)',
        data:[
          <?php
            foreach($temperaturas as $key => $value){
              echo $value.",";
            }
          ?>
        ]
      }]
    },

    // Configuration options go here
    options: {
      responsive: true,
      tooltips: {
        callbacks: {
          label: function(tooltipItems, data){
            return tooltipItems.yLabel + '°C';
          }
        }
      }
    }
  });
 
</script>

      </form>
    </div>
  </div>        
</div>

<!--================================
  MODALES DE TEMPERATURA
=================================-->
<!--Mas Informacion-->
<div class="modal fade" id="modaltempe">
  <div class="modal-dialog">
    <div class="modal-content" style="background: #6c757d; color:#fff;">
      <form role="form" method="post" enctype="multipart/form-data">

        <!--================================
          CABEZA DEL MODAL
        =================================-->
        <div class="modal-header"  style="background: #343a40; color: #fff">
          <h4 class="modal-title">Informacion</h4>
          <button type="button" style="color:red;" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <!--================================
          CUERPO DEL MODAL
        =================================-->
        <div class="modal-body">
          <div class="col-md-12">               
            <div class="col-md-12">
              <div class="card card-primary">
                <div class="card-header" style="background:#343a40;">
                  <h3 class="card-title">Temperatura</h3>
                <div class="card-body">
                  <div class="chart-container" style="position: relative;">
                  <!--<canvas id="GrafTemp" class="chartjs-render-monitor"></canvas>
                  -->
                  </div>  
                </div>
              </div>
            </div>
          </div>


        <!--================================
          FOOTER DEL MODAL
         ================================-->
        <div class="modal-footer justify-content-between">
          <button type="button" class="btn btn-primary" data-dismiss="modal">Aceptar</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal">Ver grafica</button>
        </div>

      </form>
    </div>
  </div>        
</div>


